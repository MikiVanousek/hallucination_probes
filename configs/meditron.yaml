probe_config:
  probe_id: meditron3_8b_lora_probe
  model_name: OpenMeditron/Meditron3-8B
  layer: 30
  lora_layers:
    - 0
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    - 7
    - 8
    - 9
    - 10
    - 11
    - 12
    - 13
    - 14
    - 15
    - 16
    - 17
    - 18
    - 19
    - 20
    - 21
    - 22
    - 23
    - 24
    - 25
    - 26
    - 27
    - 28
    - 29
  lora_r: 32
  lora_alpha: 64
  lora_dropout: 0.05
  load_from: null
  hf_repo_id: FayElhassan/hallucination-probes
  threshold: 0.46
wandb_project: hallucination-probes
upload_to_hf: true
save_evaluation_metrics: true
save_roc_curves: false
dump_raw_eval_results: false
per_device_train_batch_size: 2
per_device_eval_batch_size: 2
enable_gradient_checkpointing: true
gradient_accumulation_steps: 8
max_grad_norm: 1.0
logging_steps: 10
seed: 42
high_loss_threshold: null
lambda_lm: 0.0
lambda_kl: 0.5
anneal_max_aggr: true
anneal_warmup: 0.1
probe_head_lr: 0.0015
lora_lr: 0.0003
train_datasets:
  - dataset_id: llama3_1_8b_longfact_train
    hf_repo: obalcells/longfact-annotations
    subset: Meta-Llama-3.1-8B-Instruct
    split: train
    max_length: 1536
    default_ignore: false
    last_span_token: false
    ignore_buffer: 0
    pos_weight: 10.0
    neg_weight: 1.0
    shuffle: true
    seed: 42
    process_on_the_fly: false
  - dataset_id: llama3_1_8b_longfact_augmented_train
    hf_repo: obalcells/longfact-augmented-annotations
    subset: Meta-Llama-3.1-8B-Instruct
    split: train
    max_length: 1536
    default_ignore: false
    last_span_token: false
    ignore_buffer: 0
    pos_weight: 10.0
    neg_weight: 1.0
    shuffle: true
    seed: 42
    process_on_the_fly: false
  - dataset_id: llama3_3_70b_longfact_train
    hf_repo: obalcells/longfact-annotations
    subset: Llama-3.3-70B-Instruct
    split: train
    max_length: 1536
    default_ignore: false
    last_span_token: false
    ignore_buffer: 0
    pos_weight: 10.0
    neg_weight: 1.0
    shuffle: true
    seed: 42
    process_on_the_fly: false
  - dataset_id: llama3_3_70b_longfact_augmented_train
    hf_repo: obalcells/longfact-augmented-annotations
    subset: Llama-3.3-70B-Instruct
    split: train
    max_length: 1536
    default_ignore: false
    last_span_token: false
    ignore_buffer: 0
    pos_weight: 10.0
    neg_weight: 1.0
    shuffle: true
    seed: 42
    process_on_the_fly: false
  - dataset_id: qwen2_5_7b_longfact_augmented_train
    hf_repo: obalcells/longfact-augmented-annotations
    subset: Qwen2.5-7B-Instruct
    split: train
    max_length: 1536
    default_ignore: false
    last_span_token: false
    ignore_buffer: 0
    pos_weight: 10.0
    neg_weight: 1.0
    shuffle: true
    seed: 42
    process_on_the_fly: false
  - dataset_id: gemma2_9b_longfact_augmented_train
    hf_repo: obalcells/longfact-augmented-annotations
    subset: gemma-2-9b-it
    split: train
    max_length: 1536
    default_ignore: false
    last_span_token: false
    ignore_buffer: 0
    pos_weight: 10.0
    neg_weight: 1.0
    shuffle: true
    seed: 42
    process_on_the_fly: false
  - dataset_id: mistral_small_24b_longfact_augmented_train
    hf_repo: obalcells/longfact-augmented-annotations
    subset: Mistral-Small-24B-Instruct-2501
    split: train
    max_length: 1536
    default_ignore: false
    last_span_token: false
    ignore_buffer: 0
    pos_weight: 10.0
    neg_weight: 1.0
    shuffle: true
    seed: 42
    process_on_the_fly: false
  - dataset_id: llama3_1_8b_trivia_qa_train
    hf_repo: obalcells/triviaqa-balanced
    subset: Meta-Llama-3.1-8B-Instruct
    split: train
    max_length: 1536
    default_ignore: true
    last_span_token: false
    ignore_buffer: 0
    pos_weight: 10.0
    neg_weight: 1.0
    shuffle: true
    seed: 42
    process_on_the_fly: false
eval_datasets:
  - dataset_id: llama3_1_8b_longform_test
    hf_repo: obalcells/longfact-annotations
    subset: Meta-Llama-3.1-8B-Instruct
    split: test
    max_length: 1536
    pos_weight: 10.0
    neg_weight: 1.0
    default_ignore: false
    shuffle: false
  - dataset_id: llama3_1_8b_longform_augmented_test
    hf_repo: obalcells/longfact-augmented-annotations
    subset: Meta-Llama-3.1-8B-Instruct
    split: test
    max_length: 1536
    pos_weight: 10.0
    neg_weight: 1.0
    default_ignore: false
    shuffle: false
  - dataset_id: llama3_1_8b_trivia_qa_test
    hf_repo: obalcells/triviaqa-balanced
    subset: Meta-Llama-3.1-8B-Instruct
    split: test
    max_length: 128
    pos_weight: 10.0
    neg_weight: 1.0
    default_ignore: false
    shuffle: false
  - dataset_id: llama3_1_8b_healthbench_test
    hf_repo: obalcells/healthbench-annotations
    subset: Meta-Llama-3.1-8B-Instruct
    split: test
    max_length: 1536
    pos_weight: 1.0
    neg_weight: 1.0
    default_ignore: false
    shuffle: false
